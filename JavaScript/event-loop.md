# 이벤트 루프

이벤트 루프는 프로그래밍 패턴 용어로, 콜 스택과 태스크 큐를 주시하며 완료된 이벤트를 반복해서 처리하는 루프를 말합니다.

# 이벤트 루프의 동작 방식

![Event Loop](https://github.com/wanted-pre-onboarding-team-9/Frontend-Interview-Study/assets/110877564/77587dcd-668a-4bf1-8d77-de62d5d60a78)

1. 자바스크립트는 하나의 콜 스택을 가지고 있어서 이벤트가 발생하면 스택에 순서대로 쌓이고, 마지막 작업부터 처리하게 됩니다.

2. 만약 네트워크 요청 등의 느리게 동작하는 코드가 콜 스택에 쌓여 있으면, 그 코드가 끝날 때까지 다음 작업이 블로킹되는 비효율이 발생합니다.

3. 이를 해결하게 위해 웹 브라우저가 제공하는 API를 이용하여 오래 걸리는 코드를 맡겨놓고 나머지 작업을 수행할 수 있습니다.

4. 오래 걸리는 작업이 끝나면 해당 작업은 태스크 큐(콜백 큐)로 전달됩니다.

5. 여기서 이벤트 루프는 콜 스택과 태스크 큐를 감시하고 있다가, 콜 스택이 비어 있고 태스크 큐에 작업이 있으면, 해당 작업을 콜 스택에 넣어주는 역할을 합니다.

# 매크로 태스크와 마이크로 태스크

태스크(작업)는 매크로 태스크와 마이크로 태스크로 나뉩니다. 마이크로 태스크는 다른 이벤트 핸들러나 렌더링, 매크로 태크스보다 먼저 처리되며, 마이크로 태스크가 모두 처리된 이후에 다른 매크로 태스크나 렌더링 작업이 실행되게 됩니다.

매크로 태스크의 예로는 `setTimeout`, `setInterval` 등이 있고, 마이크로 태스크의 예는 `Promise`로 만든 콜백 함수가 있습니다.

# Node.js의 이벤트 루프

- Node.js에서 이벤트 루프는 libuv라는 라이브러리에서 제공합니다.
- 노드 버전 11 미만에서는 마이크로 태스크와 매크로 태스크의 순서가 다르게 작동했지만 버전 11부터는 동일하게 작동합니다.

# 참고 자료

https://ko.javascript.info/event-loop#ref-862 <br/>
https://dongyeollee.github.io/2017/12/11/JS/EventLoop/ <br/>
https://yoeubi28.medium.com/browser-vs-node-event-loop-%EC%B0%A8%EC%9D%B4-9c87f858051d<br/>
