# XSS

- `Cross-Site Scripting`의 약자로 가장 기초적인 웹 취약점 공격방법 중 하나로, 권한이 없는 사용자가 악의적인 용도로 웹사이트에 `JavaScript`를 이용해 개발자가 고려하지 않은 기능이 작동하게 하는 웹 해킹공격 기법을 말한다. 다른 사이트와 정보를 교환하는 식으로 작동하기 때문에 `'Cross-Site' Scripting`이라고 한다.

<br>

# XSS의 종류

`1. Shared-XSS`

- 가장 일반적인 XSS공격 유형
- 게시글이나 댓글등에 악성 스크립트를 작성해 DB나 서버에 저장시키고, 해당 게시글을 열람했을 때, 해당하는 악성스크립트가 실행되도록 하는 공격

`2. Reflected-XSS`

- 악성 스크립트가 URL매개변수, 폼입력을 통해 동적으로 생성한 웹페이지에서 실행되는 공격
- 입력과 동시에 결과가 바로 전해지는 공격기법이다.
- 공격자가 HTTP요청에 악성스크립트를 주입하면 그 응답결과로 사용자에게 반사되는 형태이다.
- 반사된 XSS는 피싱공격에 가장 많이 사용되며 악용하거나 방지하기가 가장 쉽다.

`3. DOM-based XSS`

- 보안에 취약한 Javascript 코드로 DOM객체를 제어하는 공격방식
- 공격자가 메일등을 이용해 URL링크를 사용자에게 전달하고, 해당 링크를 클릭 했을 때 악성코드가 담긴 HTML문서를 읽으면서 악성스크립트가 실행되는 방식을 사용한다.

## DOM-based XSS 공격과 Reflected-XSS 공격의 차이점

- 두가지 공격의 차이점은 악성스크립트가 심어지는 시점에 있다.
  - `DOM-based XSS`
    - HTML문서를 서버로부터 받으면 그 이후에는 서버로 요청을 보내지 않아도 악성스크립트를 심을 수 있다.
  - `Reflected XSS`
    - URL주소와 함께 작성된 악성스크립트가 서버에 전달되어야 한다.

<br>

# 대응 방안

`1. 이스케이프 처리`

- 사용자가 입력할 수 있는 모든 값에 대한 이스케이프 처리가 필요하다.
- 이스케이프란 특정문자를 다른 문자로 치환하는 기능으로 아래는 몇몇 예시이다.
- | 원본 문자 | 치환 문자 |
  | :-------: | :-------: |
  |     &     |  `&amp;`  |
  |     >     |  `&gt;`   |
  |     <     |  `&lt;`   |
- React는 jsx에 삽입된 모든 값을 렌더링 하기 전에 이스케이프 하므로 기본적인 방지가 가능하다.

`2. 입력값 제한`

- 사용자의 입력값을 제한해 악성 스크립트를 삽입하지 못하도록 해야 한다.
- 매개변수로 page를 받을때 page의 값을 숫자로만 허용한다면 다른 값을 입출력 할 수 없기 때문에 대응이 가능해진다.

# Reference

[DOM 기반 XSS(DOM based Cross Site Scripting) 공격과 방어](https://junhyunny.github.io/information/security/dom-based-cross-site-scripting/)
