# 브라우저의 동작 방법에 대해 설명해주세요

웹 브라우저에서 URL을 입력하고 엔터를 누르면, 브라우저는 여러 단계를 거치며 URL에 연결된 웹페이지를 사용자에게 보여줍니다. 아래의 과정들은 브라우저가 URL을 입력 받았을 때의 일반적인 동작 방식을 설명합니다.

1.  **사용자로 받은 URL 분석(Parsing the URL):**

    사용자가 주소창에 URL을 입력하거나 링크를 클릭하면, 브라우저는 해당 요청을 받습니다.

    브라우저는 먼저 URL을 분석하여 구성 요소를 이해합니다. 이것은 프로토콜(http, https), 호스트 이름(domain), 포트 번호, 경로 및 쿼리 매개 변수 등을 포함합니다.
    <br/>

2.  **DNS 조회(DNS Lookup):**

    브라우저는 URL의 도메인 이름을 IP 주소로 변환해야 합니다. 이 작업을 위해 Domain Name System(DNS)을 사용합니다.

    IP 주소는 일정기간 동안 캐시가 되며 DNS 서버에 다시 연락하는 대신 캐시에서 IP 주소를 검색하여 후속 요청 속도를 향상시킵니다.

    만약, 브라우저는 먼저 로컬 캐시를 확인하여 도메인의 IP 주소를 찾지 못하면, DNS 서버에 요청을 보냅니다.

    - DNS 조회는 보통 페이지 로드마다 호스트 이름당 한 번 씩 수행되어야 합니다.
    - 요청된 페이지에서 참조하는 고유한 호스트 이름마다 별도의 DNS 가 필요함. 만약 자원들(글꼴, 이미지, 스크립트 등)이 각기 다른 호스트 이름을 가진다면, DNS 조회는 각가의 호스트 이름에 대해 수행되어야합니다.
      <br/>

3.  **TCP 연결 설정 :**

    IP를 알고나서, 브라우저는 서버와 [TCP 3방향 핸드셰이크 (en-US)](https://developer.mozilla.org/en-US/docs/Glossary/TCP_handshake)를 통해 연결을 설정합니다. 이 단계에서 브라우저와 서버는 서로의 신뢰성을 확인하고 데이터 전송을 준비합니다.

    - 3방향 핸드셰이크 기술은 "SYN-SYN-ACK" (더 정확히는 SYN, SYN-ACK, ACK)로 불리기도 합니다.
      두 컴퓨터(브라우저와 웹 서버) 간 TCP 세션을 협상하고 시작하기 위해서 TCP가 3개의 메세지를 전달하기 때문입니다. 1. SYN: SYN은 "Synchronize"의 약자입니다
      브라우저가 서버에게 연결을 요청하기 위한 신호를 보내는 메시지

      1. SYN-ACK: SYN-ACK는 "Synchronize-Acknowledge"의 약자

         이는 서버가 브라우저의 연결 요청을 받고, 연결을 수락한다는 의미의 대답을 보내는 메시지

      2. ACK: ACK는 "Acknowledgment"의 약자입니다.

         브라우저가 서버의 응답을 받고, 연결을 확인하는 메시지입니다.

    <br/>

4.  **HTTP 요청(Http Request):**

    DNS 조회가 완료되면 HTTP 요청을 보냅니다.

    브라우저는 서버에 HTTP 메소드(GET, POST, PUT, DELETE 등)를 사용하여 요청을 보냅니다. 이 요청에는 목적에 따라 URL, 헤더 정보, 필요한 경우 요청 본문 데이터가 포함됩니다.

    예를 들어, 브라우저는 웹 페이지를 요청하기 위해 GET 메소드를 사용하고, 해당 페이지의 URL을 포함한 요청을 보낼 수 있습니다. 또는 사용자가 폼을 제출할 때 POST 메소드를 사용하여 서버에 데이터를 전송할 수도 있습니다.
    <br/>

5.  **HTTP 응답(Http Response):**

    서버는 브라우저의 요청을 받고, 해당하는 데이터를 HTTP 응답으로 반환합니다. 응답에는 HTTP 상태 코드(200 OK, 404 Not Found 등)가 포함되어 요청의 성공 또는 실패를 나타냅니다.

    응답에는 헤더 정보(콘텐츠 유형, 캐싱 정책 등)와 응답 본문 데이터가 포함됩니다. 응답 본문 데이터는 HTML, CSS, JavaScript 파일, 이미지 등의 리소스로 구성될 수 있으며, 브라우저는 이를 다운로드하여 처리합니다.
    <br/>

6.  **렌더링(Rendering):**

    브라우저는 받은 데이터를 기반으로 DOM 트리와 스타일 규칙을 조합하여 렌더링 트리를 구성합니다. 이후, 레이아웃 과정을 통해 각 요소의 위치와 크기를 계산하고, 마지막으로 화면에 컨텐츠를 그립니다.

    브라우저는 받은 HTML, CSS, JavaScript 등의 정보를 이용해서 웹 페이지를 구성하고 사용자에게 보여줍니다. 이 과정은 파싱, 스타일 계산, 레이아웃 생성, 그리고 실제로 화면에 그리는 등의 단계로 이루어집니다.
    <br/>

7.  **추가 자원 로딩(Loading Additional Resources):**

    HTML 문서에는 이미지, CSS, JavaScript 파일 등 추가적인 자원이 포함될 수 있습니다. 브라우저는 이러한 자원들을 별도의 HTTP 요청을 통해 서버로부터 다운로드 받습니다.
    <br/>

8.  **사용자 상호작용(User Interaction):**

    브라우저는 사용자와의 상호작용을 지원하기 위해 이벤트 처리를 수행합니다. 클릭, 스크롤, 키보드 입력 등의 이벤트를 감지하고, 적절한 동작을 수행하기 위해 JavaScript 코드를 실행합니다.

    모든 필요한 파일이 로드되고 페이지가 렌더링되면, 사용자는 페이지와 상호작용할 수 있습니다. 사용자의 행동에 따라, 추가적인 HTTP 요청이 발생할 수 있습니다(예를 들어, 다른 페이지 링크를 클릭하는 등).

---

**클라이언트**

- 일반 적인 웹 사용자의 인터넷이 연결된 장치들과 이런 장치들과 이용 가능한 웹에 접근하는 소프트웨어
- 일반적으로 파이어폭스 또는 크롬과 같은 웹 브라우저

**서버**

- 웹페이지, 사이트, 또는 앱을 저장하는 컴퓨터
- 클라이언트의 장비가 웹페이지에 접근하길 원할 때, 서버로부터 클라이언트의 장치로 사용자의 웹 브라우저에서 보여지기 위한 웹페이지 사본이 다운로드 됨

1. DNS

   - Domain Name System Server(도메인 이름 시스템 서버) 는 웹사이트를 위한 주소록과 같음
   - 실제 웹주소는 63.245.217.105와 같은 숫자 덩어리인 IP 주소이며, 웹의 하나뿐인 특정 위치를 나타냄
     - 기억하기가 어렵기 때문에 도메인 이름 서버가 발명되어 브라우저에 입력하는 웹주소를 웹사이트의 실제 (IP) 주소에 맞춰주는 특별한 서버임
   - 웹사이트는 IP 주소를 통해 직접 접근도 가능함

   1. 브라우저에 웹 주소를 입력할 때, 브라우저는 그 웹사이트를 검색하기전에 DNS를 살펴봄
   2. 브라우저는 HTTP 메시지를 올바른 장소로 전송하기 위해 그 웹사이트가 있는 서버가 어떤 것인 지 찾아봄

1. TCP / IP

   - 인터넷에서 컴퓨터 간에 데이터 통신을 가능하게 하는 프로토콜
   - **Transmission Control Protocol(전송 제어 규약)** : 데이터 신뢰성과 순서를 보장함
   - **Internet Protocol(인터넷 규약)** : 데이터 패킷으로 분할하여 주소 지정 및 라우팅을 하는 역할을 함

   ***

   [https://developer.mozilla.org/ko/docs/Web/Performance/How*browsers_work#dns*조회dns_lookup](https://developer.mozilla.org/ko/docs/Web/Performance/How_browsers_work#dns_%EC%A1%B0%ED%9A%8Cdns_lookup)

   https://developer.mozilla.org/ko/docs/Learn/Getting_started_with_the_web/How_the_Web_works

   크롬의 브라우저 동작 방법: https://developer.chrome.com/blog/inside-browser-part1/#browser-architecture
